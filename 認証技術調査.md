ポートフォリオに実装する認証技術の調査を実施
- 認証画面にSNSログインとメールアドレスログインを表示する場合、AWS cogniteが都合がよさそう
- Hosted UIを使用して表示内容をカスタマイズするのが良いのでは
- Firebase Authenticationの調査も進めること

- Web intent、google map api、firebeseのログイン検証のためのアプリ作成開始
- ヘッダーとログインフォーム作成、画層表示と画像投稿の雛形作成

### 10/14
- Rails　　api部分作成（user新規登録）
- React　入力フォームの作成（ログイン、ユーザー登録）
- オフラインもくもく会実施　15:00〜１９：００

### 10/15
- ReactとRailsの通信可能にした
- CORSによってHTTPリクエストがエラーをはいていた
### 解決方法
1. gem 'rack-cors'をインストール
2. config/initializers/cors.rbを下記の表に編集
```
Rails.application.config.middleware.insert_before 0, Rack::Cors do
  allow do
    * originsの値を許可するドメインやポートを設定する
    origins "localhost:3001"

    resource "*",
      headers: :any,
      methods: [:get, :post, :put, :patch, :delete, :options, :head]
  end
end
 ```

### 10/16
- ログイン機能を実装
- サーバーエラーにより進まなかった。
- config/application.rbに下記を追加したら解決した
```
config.middleware.use ActionDispatch::Session::CookieStore, key: '_namespace_key'
```

### 10/17
- ヘッダーにログイン中のユーザーを表示できるようにした
```
// app.js
  const current_userChange = (user) => {
    setCurrent_user(user);
  };

        <Routes>
          <Route path="/" element={<Top />}/>
          {/* <Route path="/photo/index" element={<IndexPhoto />}/>
          <Route path="/photo/new" element={<AddPhoto />}/> */}
          <Route path="/Login" element={<Login onUserChange={current_userChange}/>}/>
          <Route path="/user/new" element={<UserCreate />}/>
        </Routes>
```
```
//Loogin.jsx
  const handleSubmit = (e) => {
    e.preventDefault();

    axios.post('http://localhost:3000/api/v1/authentication', formValues)
    .then((resp) => {
        const userName = resp.data.name;
        onUserChange(userName);
        navigate('/');
        // console.log(resp.data.name);
    })
    .catch((error) => {
        console.log(error);
    });
  };
```

### 10/18
- rails apiモード　でActive Storageが使えるように学習
- 投稿フォームとraisのコントローラーを作成
- 保存ができないため、原因を究明中

### 10/19
- Active Storageの保存不可の原因を究明中
- formDataから送信するようにしたが、保存できない
```
    const formData = new FormData();
    formData.append('title', formValues.title);
    formData.append('description', formValues.description);
    formData.append('image', formValues.image);
```
- storage.
- paramaterは送れている
```
Parameters: {"title"=>"test", "description"=>"test", "image"=>#<ActionDispatch::Http::UploadedFile:0x000000010cbbeec0 @tempfile=#<Tempfile:/var/folders/k5/j5cq3n2n7r7gl62j2x822l2m0000gn/T/RackMultipart20231020-24458-smwjwe.png>, @content_type="image/png", @original_filename="スクリーンショット 2023-09-27 12.25.46.png", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"スクリーンショット 2023-09-27 12.25.46.png\"\r\nContent-Type: image/png\r\n">}
```

### 10/20
- つったーのシェアを追加
- 下記のコンポーネントを新たに作る
```
type TwitterIntentTweetProps = {
  text?: string;
  url?: string;
  hashtags?: string[];
  via?: string;
  related?: string[];
  in_reply_to?: string;
} & Omit<ComponentProps<"a">, "href" | "target" | "rel">;

export const TwitterIntentTweet = forwardRef<HTMLAnchorElement, TwitterIntentTweetProps>(
  (
    { text, url, hashtags, via, related, in_reply_to, ...intrinsicProps },
    forwardedRef,
  ) => {
    const _url = new URL("https://twitter.com/intent/tweet");

    if (text !== undefined) _url.searchParams.set("text", text);
    if (url !== undefined) _url.searchParams.set("url", url);
    if (hashtags !== undefined) _url.searchParams.set("hashtags", hashtags.join(","));
    if (via !== undefined) _url.searchParams.set("via", via);
    if (related !== undefined) _url.searchParams.set("related", related.join(","));
    if (in_reply_to !== undefined) _url.searchParams.set("in_reply_to", in_reply_to);

    return (
      <a ref={forwardedRef}href={_url.toString()}
        target="_blank"
        rel="noopener noreferrer"
        {...intrinsicProps}
      >Xでシェアする</a>
    );
  },
);

if (process.env.NODE_ENV === "development") {
  TwitterIntentTweet.displayName = "TwitterShareLink";
}
```
- 別のコンポーネントで変数に設定を入れて呼び出す
```
    const Tweet = {
      text: "写真を投稿しました。",
      url: "http://localhost:3001/photo/index",
      hashtags: ["photo"],
      in_reply_to: "123456789",
    }
    <STwitterIntentTweet {...Tweet} />
```

